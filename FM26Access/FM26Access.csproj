<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
    <AssemblyName>FM26Access</AssemblyName>
    <Product>FM26 Accessibility Mod</Product>
    <Version>0.1.0</Version>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <LangVersion>latest</LangVersion>
    <!-- Disable nullable to avoid issues with IL2CPP interop -->
    <Nullable>disable</Nullable>

    <!-- BepInEx IL2CPP paths - update FM26Path if your game is installed elsewhere -->
    <FM26Path>F:\Steam\steamapps\common\Football Manager 26 Demo</FM26Path>
    <BepInExPath>$(FM26Path)\BepInEx</BepInExPath>
  </PropertyGroup>

  <!-- BepInEx Core References -->
  <ItemGroup>
    <Reference Include="BepInEx.Core">
      <HintPath>$(BepInExPath)\core\BepInEx.Core.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="BepInEx.Unity.IL2CPP">
      <HintPath>$(BepInExPath)\core\BepInEx.Unity.IL2CPP.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="Il2CppInterop.Runtime">
      <HintPath>$(BepInExPath)\core\Il2CppInterop.Runtime.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <!-- Harmony for patching -->
    <Reference Include="0Harmony">
      <HintPath>$(BepInExPath)\core\0Harmony.dll</HintPath>
      <Private>false</Private>
    </Reference>
  </ItemGroup>

  <!-- Unity Interop Assemblies (generated by BepInEx) -->
  <ItemGroup>
    <Reference Include="Il2Cppmscorlib">
      <HintPath>$(BepInExPath)\interop\Il2Cppmscorlib.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine">
      <HintPath>$(BepInExPath)\interop\UnityEngine.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine.CoreModule">
      <HintPath>$(BepInExPath)\interop\UnityEngine.CoreModule.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine.UI">
      <HintPath>$(BepInExPath)\interop\UnityEngine.UI.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine.UIModule">
      <HintPath>$(BepInExPath)\interop\UnityEngine.UIModule.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine.IMGUIModule">
      <HintPath>$(BepInExPath)\interop\UnityEngine.IMGUIModule.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine.InputLegacyModule">
      <HintPath>$(BepInExPath)\interop\UnityEngine.InputLegacyModule.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="UnityEngine.UIElementsModule">
      <HintPath>$(BepInExPath)\interop\UnityEngine.UIElementsModule.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="Unity.InputSystem">
      <HintPath>$(BepInExPath)\interop\Unity.InputSystem.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <!-- FM26 SI UI Framework -->
    <Reference Include="SI.UI">
      <HintPath>$(BepInExPath)\interop\SI.UI.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <Reference Include="SI.Bindable">
      <HintPath>$(BepInExPath)\interop\SI.Bindable.dll</HintPath>
      <Private>false</Private>
    </Reference>
    <!-- FM26 UI Framework for FMNavigationManager -->
    <Reference Include="FM.UI">
      <HintPath>$(BepInExPath)\interop\FM.UI.dll</HintPath>
      <Private>false</Private>
    </Reference>
  </ItemGroup>

  <!-- Post-build: Copy to BepInEx plugins folder -->
  <Target Name="CopyToPlugins" AfterTargets="Build">
    <ItemGroup>
      <OutputFiles Include="$(TargetDir)**\*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(OutputFiles)"
          DestinationFolder="$(BepInExPath)\plugins\FM26Access\%(RecursiveDir)"
          SkipUnchangedFiles="true" />
    <Message Importance="High" Text="Copied plugin to $(BepInExPath)\plugins\FM26Access\" />
  </Target>

</Project>
